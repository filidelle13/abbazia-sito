const content = {
  it: {
    section1: {
      title: "Storia",
      text: "Secondo la tradizione la chiesa fu edificata sul luogo di nascita di Siro, vescovo di Genova nel IV secolo. Non è possibile fissare una data precisa, ma nel 1025 il vescovo Landolfo la donò ai monaci benedettini: per questo quest'anno festeggiamo il millenario.",
      image: "images/abbazia.jpg"
    },
    section2: {
      title: "Interni",
      text: "La pianta basilicale senza transetto ha 3 navate. Ci sono 11 colonne alte circa 4 m che dividono lo spazio in 3 navate. In fondo c’è una colonna più robusta che sostiene il campanile. Nelle tredici monofore sono le vetrate di Ilario Cuoghi, artista che ha realizzato anche il portale maggiore e le sculture per la Via Crucis. Il soffitto della navata centrale è una capriata lignea della Corsica del 1923.",
      image: "images/interni.jpg"
    },
    section3: {
      title: "Facciata",
      text: "La facciata mette in risalto la divisione interna in tre navate, con un ingresso centrale unico e un portale semplice. Orientata ad Est, ha forma a salienti con quattro falde di tetto e presenta elementi tipici dell’architettura romanica: archi, rosone e pavimento a ciottoli (risseu).",
      image: "images/facciata.jpg"
    },
    section4: {
      title: "Retro",
      text: "Il campanile è robusto e slanciato, alto più di 30 metri, con pianta quadrata e tetto piramidale, appoggiato all’ultima campata della navata destra. Nella cella campanaria ci sono trifore e sotto una bifora. Sul retro si vedono i tre absidi.",
      image: "images/retro.jpg"
    },
    section5: {
      title: "Polittico di San Siro",
      text: "Opera d’arte notevole è il Polittico di San Siro, realizzato nel 1516 da Pier Francesco Sacchi detto il Pavese. Restaurato nel 1960. Il santo è rappresentato su un trono, benedicente, con il pastorale che schiaccia il Basilisco (simbolo dell’eresia ariana). Attorno, 8 scene della sua vita e vocazione, sormontate dal busto della Vergine che allatta il Bambino Santo.",
      image: "images/polittico.jpg"
    },
    menuLanguage: "Lingua",
    menuAbbey: "L'abbazia",
    langIt: "Italiano",
    langEn: "Inglese",
    langEs: "Spagnolo",
    section1Name: "Storia",
    section2Name: "Interni",
    section3Name: "Facciata",
    section4Name: "Retro",
    section5Name: "Polittico"
  },
  en: {
    section1: {
      title: "History",
      text: "According to tradition the church was built on the spot where Siro, bishop of Genoa in the IV century, was born. It is not possible to fix a precise date for the building, but in 1025, Bishop Landolfo gave it to the Benedictine monks: this is why this year we celebrate the millennium.",
      image: "images/abbazia.jpg"
    },
    section2: {
      title: "Interior",
      text: "The basilica plan without transept has 3 aisles. There are 11 columns about 4 m high that divide the space into 3 aisles. At the bottom we find a more robust column that supports the bell tower. In the thirteen single-light windows are stained glass by Ilario Cuoghi, an artist who also made the main portal and sculptures for the Way of the Cross. The ceiling of the central nave is a wooden truss from Corsica, 1923.",
      image: "images/interni.jpg"
    },
    section3: {
      title: "Facade",
      text: "The facade highlights the internal division into three aisles, with a single central entrance and a simple portal. Oriented eastward, it has a stepped form with four roof slopes and typical Romanesque architectural elements: small arches, rose window, and pebble pavement (risseu).",
      image: "images/facciata.jpg"
    },
    section4: {
      title: "Rear",
      text: "The bell tower is robust and slender, more than 30 meters high, with a square plan and a pyramidal roof, based on the last bay of the right nave. The bell chamber has triforas and below a bifora. At the back, you can see the three apses.",
      image: "images/retro.jpg"
    },
    section5: {
      title: "Polyptych of San Siro",
      text: "A notable artwork is the Polyptych of San Siro, made in 1516 by Pier Francesco Sacchi called the Pavese. Restored in 1960. The saint is represented on a throne, blessing, with the pastoral staff crushing the Basilisk (symbol of Arian heresy). Around, 8 scenes of his life and vocation, topped by the bust of the Virgin nursing the Holy Child.",
      image: "images/polittico.jpg"
    },
    menuLanguage: "Language",
    menuAbbey: "Abbey",
    langIt: "Italian",
    langEn: "English",
    langEs: "Spanish",
    section1Name: "History",
    section2Name: "Interior",
    section3Name: "Facade",
    section4Name: "Rear",
    section5Name: "Polyptych"
  },
  es: {
    section1: {
      title: "Historia",
      text: "Según la tradición, la iglesia se construyó en el lugar donde nació Siro, obispo de Génova en el siglo IV. No se puede fijar una fecha precisa para la edificación, pero en 1025, el obispo Landolfo la entregó a los monjes benedictinos: por eso este año celebramos el milenario.",
      image: "images/abbazia.jpg"
    },
    section2: {
      title: "Interiores",
      text: "La planta basilical sin transepto tiene 3 naves. Hay 11 columnas de unos 4 m de altura que dividen el espacio en 3 naves. Al fondo hay una columna más robusta que sostiene el campanario. En las trece monóforas están las vidrieras de Ilario Cuoghi, artista que también realizó el portal mayor y las esculturas para el Vía Crucis. El techo de la nave central es una armadura de madera de Córcega del 1923.",
      image: "images/interni.jpg"
    },
    section3: {
      title: "Fachada",
      text: "La fachada destaca la división interna en tres naves, con una única entrada central y un portal simple. Orientada hacia el Este, tiene forma de salientes con cuatro faldones del techo y presenta elementos típicos de la arquitectura románica: arquitos, rosetón y pavimento de guijarros (risseu).",
      image: "images/facciata.jpg"
    },
    section4: {
      title: "Trasero",
      text: "El campanario es robusto y esbelto, alto más de 30 metros, con planta cuadrada y techo piramidal, basado en la última campada de la nave derecha. En la celda del campanario hay triforas y debajo una bifora. En la parte trasera se ven los tres ábsides.",
      image: "images/retro.jpg"
    },
    section5: {
      title: "Políptico de San Siro",
      text: "Una obra de arte notable es el Políptico de San Siro, realizado en 1516 por Pier Francesco Sacchi llamado il Pavese. Restaurado en 1960. El santo está representado en un trono, bendiciendo, con el pastor que aplasta al Basilisco (símbolo de la herejía arriana). Alrededor, 8 escenas de su vida y vocación, sobre ellas el busto de la Virgen que amamanta al Niño Santo.",
      image: "images/polittico.jpg"
    },
    menuLanguage: "Idioma",
    menuAbbey: "La abadía",
    langIt: "Italiano",
    langEn: "Inglés",
    langEs: "Español",
    section1Name: "Historia",
    section2Name: "Interiores",
    section3Name: "Fachada",
    section4Name: "Trasero",
    section5Name: "Políptico"
  }
};

let currentLanguage = "it";
let currentSection = "section1";

const hamburgerBtn = document.getElementById("hamburgerBtn");
const sidebar = document.getElementById("sidebar");
const mainContent = document.getElementById("mainContent");

const langGroupTitle = document.getElementById("langGroupTitle");
const abbeyGroupTitle = document.getElementById("abbeyGroupTitle");
const menuTextSpan = document.getElementById("menuText");

function updateMenuTexts() {
  const langData = content[currentLanguage];
  
  langGroupTitle.textContent = langData.menuLanguage;
  abbeyGroupTitle.textContent = langData.menuAbbey;
  menuTextSpan.textContent = "Menu";

  // Aggiorna bottoni lingua
  document.querySelectorAll(".lang-btn").forEach(btn => {
    const lang = btn.getAttribute("data-lang");
    if(lang === "it") btn.textContent = langData.langIt;
    if(lang === "en") btn.textContent = langData.langEn;
    if(lang === "es") btn.textContent = langData.langEs;
    btn.classList.toggle("active", lang === currentLanguage);
  });

  // Aggiorna bottoni sezioni
  document.querySelectorAll(".section-btn").forEach((btn, i) => {
    const key = "section" + (i + 1) + "Name";
    btn.textContent = langData[key];
    btn.classList.toggle("active", btn.getAttribute("data-section") === currentSection);
  });
}

function updateContent() {
  const langData = content[currentLanguage];
  const sectionData = langData[currentSection];

  mainContent.innerHTML = `
    <h1>${sectionData.title}</h1>
    <p>${sectionData.text}</p>
    <img src="${sectionData.image}" alt="${sectionData.title}" />
  `;
  mainContent.focus();
}

function isMobile() {
  return window.innerWidth <= 700;
}

function toggleSidebar() {
  if(isMobile()) {
    sidebar.classList.toggle("open");
    sidebar.classList.toggle("closed");
  }
}

function closeSidebarMobile() {
  if(isMobile()) {
    sidebar.classList.remove("open");
    sidebar.classList.add("closed");
  }
}

// Event Listeners

hamburgerBtn.addEventListener("click", () => {
  toggleSidebar();
});

document.querySelectorAll(".lang-btn").forEach(btn => {
  btn.addEventListener("click", () => {
    const selectedLang = btn.getAttribute("data-lang");
    if(selectedLang !== currentLanguage) {
      currentLanguage = selectedLang;
      updateMenuTexts();
      updateContent();
    }
    if(isMobile()) closeSidebarMobile();
  });
});

document.querySelectorAll(".section-btn").forEach(btn => {
  btn.addEventListener("click", () => {
    const selectedSection = btn.getAttribute("data-section");
    if(selectedSection !== currentSection) {
      currentSection = selectedSection;
      updateMenuTexts();
      updateContent();
    }
    if(isMobile()) closeSidebarMobile();
  });
});

// Init
updateMenuTexts();
updateContent();
closeSidebarMobile();

// Optional: chiudere sidebar se resize da mobile a desktop e viceversa
window.addEventListener("resize", () => {
  if(!isMobile()) {
    sidebar.classList.remove("closed");
    sidebar.classList.remove("open");
  } else {
    closeSidebarMobile();
  }
});
