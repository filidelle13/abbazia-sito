const content = {
  it: {
    section1: {
      title: "Storia",
      text: "Secondo la tradizione la chiesa fu edificata sul luogo di nascita di Siro, vescovo di Genova nel IV secolo. Non è possibile fissare una data precisa, ma nel 1025 il vescovo Landolfo la donò ai monaci benedettini: per questo quest'anno festeggiamo il millenario.",
      image: "images/abbazia.jpg"
    },
    section2: {
      title: "Interni",
      text: "La pianta basilicale senza transetto ha 3 navate. Ci sono 11 colonne alte circa 4 m che dividono lo spazio in 3 navate. In fondo c’è una colonna più robusta che sostiene il campanile. Nelle tredici monofore sono le vetrate di Ilario Cuoghi, artista che ha realizzato anche il portale maggiore e le sculture per la Via Crucis. Il soffitto della navata centrale è una capriata lignea della Corsica del 1923.",
      image: "images/interni.jpg"
    },
    section3: {
      title: "Facciata",
      text: "La facciata mette in risalto la divisione interna in tre navate, con un ingresso centrale unico e un portale semplice. Orientata ad Est, ha forma a salienti con quattro falde di tetto e presenta elementi tipici dell’architettura romanica: archi, rosone e pavimento a ciottoli (risseu).",
      image: "images/facciata.jpg"
    },
    section4: {
      title: "Retro",
      text: "Il campanile è robusto e slanciato, alto più di 30 metri, con pianta quadrata e tetto piramidale, appoggiato all’ultima campata della navata destra. Nella cella campanaria ci sono trifore e sotto una bifora. Sul retro si vedono i tre absidi.",
      image: "images/retro.jpg"
    },
    section5: {
      title: "Polittico di San Siro",
      text: "Opera d’arte notevole è il Polittico di San Siro, realizzato nel 1516 da Pier Francesco Sacchi detto il Pavese. Restaurato nel 1960. Il santo è rappresentato su un trono, benedicente, con il pastorale che schiaccia il Basilisco (simbolo dell’eresia ariana). Attorno, 8 scene della sua vita e vocazione, sormontate dal busto della Vergine che allatta il Bambino Santo.",
      image: "images/polittico.jpg"
    },
    menuLanguage: "Lingua",
    menuAbbey: "L'abbazia",
    langIt: "Italiano",
    langEn: "Inglese",
    langEs: "Spagnolo",
    section1Name: "Storia",
    section2Name: "Interni",
    section3Name: "Facciata",
    section4Name: "Retro",
    section5Name: "Polittico"
  },
  en: {
    section1: {
      title: "History",
      text: "According to tradition the church was built on the birthplace of Siro, bishop of Genoa in the IV century. It is not possible to set a precise date, but in 1025 the bishop Landolfo donated it to the Benedictine monks: for this year we celebrate the millennium.",
      image: "images/abbazia.jpg"
    },
    section2: {
      title: "Interior",
      text: "The basilica floorplan without transept has 3 aisles. There are 11 columns about 4 m high dividing the space in 3 aisles. At the end there is a more robust column supporting the bell tower. In the thirteen monoforas are the stained glass windows by Ilario Cuoghi, who also made the main portal and sculptures for the Via Crucis. The ceiling of the central aisle is a wooden truss from Corsica from 1923.",
      image: "images/interni.jpg"
    },
    section3: {
      title: "Facade",
      text: "The facade highlights the internal division into three aisles, with a single central entrance and a simple portal. Oriented to East, it has a stepped form with four roofs and presents typical Romanesque architectural elements: arches, rose window and pebble pavement (risseu).",
      image: "images/facciata.jpg"
    },
    section4: {
      title: "Back",
      text: "The bell tower is robust and slender, over 30 meters high, with a square plan and pyramidal roof, resting on the last bay of the right aisle. In the bell chamber there are triforas and below a bifora. On the back you can see the three apses.",
      image: "images/retro.jpg"
    },
    section5: {
      title: "Polyptych of San Siro",
      text: "A remarkable work of art is the Polyptych of San Siro, made in 1516 by Pier Francesco Sacchi known as 'il Pavese'. Restored in 1960. The saint is depicted on a throne, blessing, with the pastoral staff crushing the Basilisk (symbol of Arian heresy). Around it, 8 scenes of his life and vocation, topped by the bust of the Virgin nursing the Holy Child.",
      image: "images/polittico.jpg"
    },
    menuLanguage: "Language",
    menuAbbey: "The Abbey",
    langIt: "Italian",
    langEn: "English",
    langEs: "Spanish",
    section1Name: "History",
    section2Name: "Interior",
    section3Name: "Facade",
    section4Name: "Back",
    section5Name: "Polyptych"
  },
  es: {
    section1: {
      title: "Historia",
      text: "Según la tradición, la iglesia fue construida en el lugar de nacimiento de Siro, obispo de Génova en el siglo IV. No es posible fijar una fecha precisa, pero en 1025 el obispo Landolfo la donó a los monjes benedictinos: por eso este año celebramos el milenario.",
      image: "images/abbazia.jpg"
    },
    section2: {
      title: "Interiores",
      text: "La planta basilical sin transepto tiene 3 naves. Hay 11 columnas de aproximadamente 4 m de altura que dividen el espacio en 3 naves. Al final hay una columna más robusta que sostiene el campanario. En las trece monóforas están las vidrieras de Ilario Cuoghi, artista que también realizó el portal principal y las esculturas para la Vía Crucis. El techo de la nave central es una armadura de madera de Córcega de 1923.",
      image: "images/interni.jpg"
    },
    section3: {
      title: "Fachada",
      text: "La fachada destaca la división interna en tres naves, con una entrada central única y un portal simple. Orientada al Este, tiene forma de frontón con cuatro faldones de techo y presenta elementos típicos de la arquitectura románica: arcos, rosetón y pavimento de guijarros (risseu).",
      image: "images/facciata.jpg"
    },
    section4: {
      title: "Parte trasera",
      text: "El campanario es robusto y esbelto, de más de 30 metros de altura, con planta cuadrada y techo piramidal, apoyado en la última campa de la nave derecha. En la celda del campanario hay triforas y debajo una bifora. En la parte trasera se ven los tres ábsides.",
      image: "images/retro.jpg"
    },
    section5: {
      title: "Políptico de San Siro",
      text: "Una obra de arte notable es el Políptico de San Siro, realizado en 1516 por Pier Francesco Sacchi llamado 'il Pavese'. Restaurado en 1960. El santo está representado en un trono, bendiciendo, con el pastoral que aplasta al Basilisco (símbolo de la herejía arriana). Alrededor, 8 escenas de su vida y vocación, coronadas por el busto de la Virgen que amamanta al Niño Santo.",
      image: "images/polittico.jpg"
    },
    menuLanguage: "Idioma",
    menuAbbey: "La abadía",
    langIt: "Italiano",
    langEn: "Inglés",
    langEs: "Español",
    section1Name: "Historia",
    section2Name: "Interiores",
    section3Name: "Fachada",
    section4Name: "Parte trasera",
    section5Name: "Políptico"
  }
};

const sidebar = document.getElementById("sidebar");
const hamburgerBtn = document.getElementById("hamburgerBtn");
const menuText = document.getElementById("menuText");
const langBtns = document.querySelectorAll(".lang-btn");
const sectionBtns = document.querySelectorAll(".section-btn");
const mainContent = document.getElementById("mainContent");

const langGroupTitle = document.getElementById("langGroupTitle");
const abbeyGroupTitle = document.getElementById("abbeyGroupTitle");

let currentLang = "it";
let currentSection = "section1";

function isMobile() {
  return window.innerWidth <= 700;
}

function toggleSidebar() {
  if (isMobile()) {
    const isOpen = sidebar.classList.toggle("open");
    sidebar.classList.toggle("closed", !isOpen);
    hamburgerBtn.setAttribute("aria-expanded", isOpen);
  }
}

hamburgerBtn.addEventListener("click", toggleSidebar);

function updateMenuTexts() {
  const langData = content[currentLang];

  menuText.textContent = currentLang === "it" ? "Menu" :
                         currentLang === "en" ? "Menu" : "Menú";

  langGroupTitle.textContent = langData.menuLanguage;
  abbeyGroupTitle.textContent = langData.menuAbbey;

  // Aggiorna i bottoni lingua
  langBtns.forEach(btn => {
    const key = "lang" + btn.dataset.lang.charAt(0).toUpperCase() + btn.dataset.lang.slice(1);
    btn.textContent = langData[key] || btn.textContent;
    btn.classList.toggle("active", btn.dataset.lang === currentLang);
  });

  // Aggiorna i bottoni sezioni
  sectionBtns.forEach(btn => {
    const key = btn.dataset.section + "Name";
    btn.textContent = langData[key] || btn.textContent;
    btn.classList.toggle("active", btn.dataset.section === currentSection);
  });
}

function updateContent() {
  const sec = content[currentLang][currentSection];

  if (!sec) {
    mainContent.innerHTML = "<p>Contenuto non disponibile.</p>";
    return;
  }

  mainContent.innerHTML = `
    <h1>${sec.title}</h1>
    <p>${sec.text}</p>
    <img src="${sec.image}" alt="${sec.title}" />
  `;
}

langBtns.forEach(btn => {
  btn.addEventListener("click", () => {
    if (btn.dataset.lang !== currentLang) {
      currentLang = btn.dataset.lang;
      updateMenuTexts();
      updateContent();
      // NON tornare a section1, resta sulla sezione corrente
      if (isMobile()) toggleSidebar(); // chiude menu in mobile dopo scelta
    }
  });
});

sectionBtns.forEach(btn => {
  btn.addEventListener("click", () => {
    if (btn.dataset.section !== currentSection) {
      currentSection = btn.dataset.section;
      updateMenuTexts();
      updateContent();
      if (isMobile()) toggleSidebar(); // chiude menu in mobile dopo scelta
    }
  });
});

// Inizializza pagina
window.addEventListener("load", () => {
  updateMenuTexts();
  updateContent();
  hamburgerBtn.setAttribute("aria-expanded", "false");
});
